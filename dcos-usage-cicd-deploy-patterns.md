## 部署模式

### 蓝-绿部署（Blue-Green Deployment）

__蓝-绿部署__是通过创建两个版本的应用程序（蓝色和绿色），通过在两个版本之间安全切换，确保应用提供的服务实时在线的一种方式。

![](/assets/blue_green_deployments.png)
如上图所示，应用程序的新版本（绿色）部署后，如果通过功能及性能测试，可以在当前版本（蓝色）应用处理完所有的流量、请求及待处理操作后通过路由切换的方式将新的流量、请求调度给新的版本（绿色）。如果新版应用系统（绿色）出现问题，可以及时回滚到原有版本（蓝色）；如果一切正常可以停止原有版本（蓝色），回收资源。在发布新版本时，继续重复上述操作。

关于蓝-绿部署的详细过程，请参考[Martin Fowler的文章](https://martinfowler.com/bliki/BlueGreenDeployment.html)。

蓝-绿部署的优点包括：1）上线过程对用户透明，不影响用户的体验；2）可以在生产环境对新版本进行功能和性能进行测试，便于试点；3）在新系统出现故障时，可以及时降级回滚。

在生产环境中，通常使用脚本将上述过程集成到部署系统中实现过程的自动化控制。在DC/OS中，用户可以通过CLI命令实现蓝-绿部署过程。

#### 通过DCOS CLI实现蓝-绿部署

__前提条件__

应用通过Marathon管理部署，并且实现[健康检查](/dcos-marathon-health-checks.md)。

### 金丝雀部署（Canary Deployment）

### 参考